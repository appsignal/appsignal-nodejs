#!/usr/bin/env node

const fs = require("fs")
const pkg = require("../package.json")
const {
  AGENT_VERSION
} = require("../../nodejs-ext/scripts/extension/constants")

const data = `// Do not touch this file, auto-generated by scripts/create-versionfile
export const VERSION = "${pkg.version}"
export const AGENT_VERSION = "${AGENT_VERSION}"\n`

fs.writeFile(`${process.cwd()}/src/version.ts`, data, "utf8", err => {
  if (err) throw err
  console.log("The VERSION file has been saved!")
  process.exit(0)
})
